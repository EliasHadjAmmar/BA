
from SCons.Script import Command


rulers = Command('temp/rulers.csv',            # target path (output file)
        ['input/families_rulers_imputed.dta',
         'code/Rulers.R'],                     # source paths (input file)
        'Rscript code/Rulers.R')               # command line string

construction = Command('temp/construction_new.csv',
        ['input/construction.csv',
         'code/Construction.R'],
        'Rscript code/Construction.R')

terr_sizes = Command('temp/terr_sizes.csv',
        ['input/cities_families_1300_1918.dta',
         'code/LineageSize.R'],
        'Rscript code/LineageSize.R')

cities1875 = Command('temp/cities1875.csv',
        ['input/city_locations.csv',
         'input/destatis1881.csv',
         'code/Population1875.R'],
         'Rscript code/Population1875.R')

wages = Command('temp/wages.csv',
        ['input/clean_crafts.xlsx',
         'code/Wages.R'],
        'Rscript code/Wages.R')

extinctions_rulers = Command('temp/last_rulers.csv',
        [rulers, 
         'code/ExtinctionsRulers.R'],
        'Rscript code/ExtinctionsRulers.R')

extinctions_terrs = Command('temp/ext_terrs.csv',
        ['input/territories.csv',
         'code/ExtinctionsTerritories.R'],
         'Rscript code/ExtinctionsTerritories.R')

extinctions = Command('output/extinctions.csv',
        [extinctions_rulers, extinctions_terrs,
         'code/CombineExtinctions.R'],
         'Rscript code/CombineExtinctions.R')

cities = Command('output/cities.csv',
        ['input/cities_families_1300_1918.dta',
         'input/city_locations.csv',
        construction, cities1875, wages, 
        'code/CombineCityData.R'],
        'Rscript code/CombineCityData.R')

lineages = Command('output/lineages.csv',
        ['input/territory_codes.csv',
        terr_sizes, extinctions,
        'code/CombineLineageData.R'],
        'Rscript code/CombineLineageData.R')

data_build = Command('output/build.csv',
        [cities, lineages,
         'code/CombineAll.R'],
        'Rscript code/CombineAll.R')

